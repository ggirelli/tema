#!/usr/bin/env Rscript

source('extendIgraph.R')

options(echo=TRUE)
args <- commandArgs(trailingOnly = TRUE)

if(file.exists(paste0('/home/gire/public_html/SOGIv020/server_side/session/', args[1], '/'))) {
	setwd(paste0('/home/gire/public_html/SOGIv020/server_side/session/', args[1], '/'))
	
	if(file.exists(paste0(args[2], '.graphml'))) {
		cat('Reading GRAPHML file.\n')
		g <- read.graph(paste0(args[2], '.graphml'), format='graphml')
		cat('Writing JSON file.\n')
		write.graph(g, paste0(args[2], '.json'), format='json')
		cat('Converted.\n')
	}
}